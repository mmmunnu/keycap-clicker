<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>keycap-clicker</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    margin: 0;
    height: 100vh;
    background: #0d0d0f;
    display: flex;
    justify-content: center;
    align-items: center;
    font-family: -apple-system, system-ui;
    color: white;
  }

  .wrap {
    width: 300px;
    text-align: center;
  }

  .title {
    font-size: 28px;
    font-weight: 800;
    margin-bottom: 18px;
  }

  .switches {
    display: flex;
    gap: 8px;
    margin-bottom: 14px;
  }

  .switch {
    flex: 1;
    padding: 10px 0;
    border-radius: 10px;
    background: #2c2c2e;
    color: #aaa;
    font-weight: 700;
    font-size: 13px;
  }

  .switch.active {
    background: white;
    color: black;
  }

  .enable {
    width: 100%;
    padding: 12px 0;
    margin-bottom: 26px;
    border-radius: 10px;
    border: none;
    font-weight: 700;
  }

  .keycap {
    width: 160px;
    height: 160px;
    margin: 0 auto;
    background: linear-gradient(145deg,#f7f7f7,#cfcfcf);
    border-radius: 18px;
    box-shadow:
      0 12px 0 #b5b5b5,
      0 22px 35px rgba(0,0,0,.6);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    color: #111;
    user-select: none;
    opacity: .35;
  }

  .keycap.active {
    opacity: 1;
  }

  .keycap:active {
    transform: translateY(7px);
    box-shadow:
      0 5px 0 #b5b5b5,
      0 12px 22px rgba(0,0,0,.6);
  }

  .legend-main {
    font-size: 26px;
    font-weight: 800;
  }

  .legend-sub {
    font-size: 12px;
    margin-top: 6px;
    opacity: .6;
  }

  .hint {
    margin-top: 14px;
    font-size: 12px;
    color: #888;
  }
</style>
</head>

<body>
<div class="wrap">
  <div class="title">keycap-clicker</div>

  <div class="switches">
    <div class="switch active" data-type="black">ÌùëÏ∂ï</div>
    <div class="switch" data-type="brown">Í∞àÏ∂ï</div>
    <div class="switch" data-type="blue">Ï≤≠Ï∂ï</div>
  </div>

  <button class="enable" id="enableBtn">üîä ÏÜåÎ¶¨ ÌôúÏÑ±Ìôî</button>

  <div class="keycap" id="keycap">
    <div class="legend-main">Enter</div>
    <div class="legend-sub">return</div>
  </div>

  <div class="hint">Ï∂ï ÏÑ†ÌÉù ‚Üí ÏÜåÎ¶¨ ÌôúÏÑ±Ìôî ‚Üí ÌÇ§Ï∫°</div>
</div>

<script>
let audioCtx;
let enabled = false;
let current = "black";

const enableBtn = document.getElementById("enableBtn");
const keycap = document.getElementById("keycap");
const switches = document.querySelectorAll(".switch");

enableBtn.addEventListener("click", async () => {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  await audioCtx.resume();
  enabled = true;
  keycap.classList.add("active");
  enableBtn.textContent = "ÌôúÏÑ±Ìôî ÏôÑÎ£å ‚úì";
  enableBtn.disabled = true;
});

switches.forEach(btn => {
  btn.addEventListener("click", () => {
    switches.forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    current = btn.dataset.type;
  });
});

function play() {
  if (!enabled) return;

  const now = audioCtx.currentTime;
  const gain = audioCtx.createGain();

  // üîπ ÎûúÎç§ ÎØ∏ÏÑ∏ Ï∞®Ïù¥
  const rand = Math.random();

  if (current === "black") {
    const osc = audioCtx.createOscillator();
    osc.type = "sine";
    osc.frequency.value = 95 + rand * 20;

    gain.gain.setValueAtTime(0.4, now);
    gain.gain.exponentialRampToValueAtTime(0.001, now + 0.12);

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start(now);
    osc.stop(now + 0.13);
  }

  if (current === "brown") {
    const osc = audioCtx.createOscillator();
    osc.type = "triangle";
    osc.frequency.value = 220 + rand * 60;

    gain.gain.setValueAtTime(0.28, now);
    gain.gain.exponentialRampToValueAtTime(0.001, now + 0.08);

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start(now);
    osc.stop(now + 0.09);
  }

  if (current === "blue") {
    const osc = audioCtx.createOscillator();
    osc.type = "square";
    osc.frequency.value = 900 + rand * 300;

    gain.gain.setValueAtTime(0.22, now);
    gain.gain.exponentialRampToValueAtTime(0.001, now + 0.05);

    osc.connect(gain);
    gain.connect(audioCtx.destination);

    osc.start(now);
    osc.stop(now + 0.06);
  }
}

keycap.addEventListener("touchstart", play);
keycap.addEventListener("mousedown", play);
</script>
</body>
</html>
